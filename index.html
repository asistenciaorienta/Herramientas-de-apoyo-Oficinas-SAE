<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Herramientas de apoyo para personal SAE en Oficinas de Empleo</title>
  <style>
    /* Box-sizing global */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    @font-face {
      font-family: 'Montserrat';
      src: url('fonts/Montserrat-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
    }
    
    @font-face {
      font-family: 'Montserrat';
      src: url('fonts/Montserrat-Bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
    }

    body {
      font-family: "Montserrat", "Segoe UI", sans-serif;
      background: #ffffff;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      width: 100%;
    }

    header {
      position: relative;             /* Para poder posicionar elementos dentro */
      display: flex;
      align-items: center;       /* Centra verticalmente */
      justify-content: center;        /* Centra el texto en toda la cabecera */
      background-color: #fff; /* f5f5f5 */
      color: #087021; /* Fondo verde institucional */
      padding: 1rem 2rem; /* padding: 1rem 0; */
    }

    header::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -16px; /* lo empuja fuera del header */
      height: 14px;   /* m√°s alto para que se vea bien */
      width: 100%;
      background: linear-gradient(to right, #e9d87c, #78a579);
      z-index: 0; /* detr√°s del contenido */
    }

    header img.logo-sae {
      position: absolute; 
      max-height: 60px;          /* Controla la altura m√°xima del logo */
      height: auto;
      width: auto;
      left: 1rem;       /* Peque√±o margen izquierdo */
    }
    
    header h1 {
      font-size: 2rem;
      font-weight: 800;
      margin: 0; /*margin: 0.3rem 0 0;*/
      text-align: center;
    }

    header h2 {
      font-size: 1.2rem;
      font-weight: bold;
      margin: 0.3rem 0 0;
      color: #e3cd66;
    }

    footer {
      background-color: #555555;
      color: #ffffff;
      text-align: center;
      padding: 1rem 1rem;
      margin-top: auto;
      font-size: 1rem;
      width: 100%;
      align-self: stretch; /* asegura que el flex hijo se estire */
    }

    main {
      flex: 1;
      display: grid;
      grid-template-columns: 2fr 1fr; /* izquierda m√°s ancha que derecha */
      grid-template-rows: auto auto; /* fila superior e inferior */
      gap: 2rem;
      padding: 2rem;
    }

    /* Bloques principales */
    .section {
      background: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .section-title {
      color: #333;
      font-weight: 600; 
      text-align: center;
      padding: 0.5rem 0; /* altura del ‚Äút√≠tulo‚Äù */
      border-radius: 5px 5px 0 0; /* bordes redondeados solo arriba */
      width: 100%;
      display: block;      
      margin-bottom: 1.5rem; /* separa este div del que est√° debajo */
      font-size: 1.2rem;
      text-align: center;
      border-radius: 12px;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);      
    }
    
    .section p {
      font-size: 1.05rem;
      color: #444;
      margin-top: 0.5rem;
    }
    
    #orientacion {
      grid-column: 1;
      grid-row: 1;
    }
    #orientacion .section-title { 
      background: linear-gradient(135deg, #e3cd66, #F5E784); }

    #migrantes {
      grid-column: 2;
      grid-row: 1;
    }
    #migrantes .section-title { background: linear-gradient(135deg, #a5cca0, #D8F2D5); }

    #empresas {
      grid-column: 1 / span 2; /* ocupa las dos columnas */
      grid-row: 2;
    }
    #empresas .section-title { background: linear-gradient(135deg, #77b5c3, #ACDDE8); }


    /* Diagram dentro del bloque de orientaci√≥n */
    .diagram {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-template-rows: auto auto auto;
      gap: 2rem;
      justify-items: center;
      align-items: center;
      position: relative;
      width: 100%;
      max-width: none; /* se adapta al contenedor padre sin l√≠mite */
      margin: 4rem auto auto 0;
      padding: 0 1rem;
    }

    .box {
      padding: 1rem 1.5rem;
      border-radius: 10px;
      color: #ffffff;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      width: 200px;
      position: relative;
      z-index: 1;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
  
    .box:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 10px rgba(0,0,0,0.3);
    }    

    #inicio { background: #087021; grid-column: 1; grid-row: 2; }
    #puntuales { background: #e3cd66; color:#333; grid-column: 3; grid-row: 1; } /* color amarillo */
    #profundidad { background: #a5cca0; color:#333; grid-column: 3; grid-row: 3; } /* color verde claro */
    #itinerario { background: #77b5c3; grid-column: 5; grid-row: 2; } /* color azul */
    #servicios { background: #087021; grid-column: 7; grid-row: 2; }

    svg.arrows {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 2;
    }

    path {
      stroke: #333;
      stroke-width: 2;
      fill: none;
    }
   
    .grid-imagenes {
      display: grid;
      grid-template-columns: repeat(2, 1fr); /* 2 columnas iguales */
      gap: 2rem; /* separaci√≥n entre las im√°genes */
      text-align: center; /* centra texto bajo la imagen */
      padding: 0.5rem;
      margin: 3rem auto auto 0;
    }
   
    .grid-imagenes img {
      border-radius: 12px;
      transition: transform 0.3s ease;
    }

    .grid-imagenes img:hover {
      transform: scale(1.05);
    }
        
    .grid-imagenes > div {
      border: 1px solid #e0e0e0;  /* borde finito */
      border-radius: 16px;       /* esquinas redondeadas */
      padding: 1rem;            /* espacio interior para que no se pegue */
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .grid-imagenes > div:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    
    /* --------- ENLACES --------- */
    a {
      color: #3b82f6;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    a:hover {
      color: #1e40af;
      text-shadow: 0 0 6px rgba(59,130,246,0.3);
    }
    
    @keyframes aparecer {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }    

    /* üß© Animaciones */
    @keyframes zoomIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
  
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* üí´ Animaci√≥n especial para el QR */
    .animarQR {
      animation: slidePulse 0.8s ease-in-out;
    }
    
    @keyframes slidePulse {
      0% { transform: translateY(-30px) scale(0.8); opacity: 0; }
      50% { transform: translateY(0) scale(1.05); opacity: 1; }
      100% { transform: scale(1); }
    }    
  
    /* üí¨ Modal base */
    /* üé® Colores tem√°ticos */
    .modal-verde .modal-content { border-top: 16px solid #2e8b57; }
    .modal-amarillo .modal-content { border-top: 16px solid #e8b300; }
    .modal-azul .modal-content { border-top: 16px solid #1e90ff; }
    .modal-naranja .modal-content { border-top: 16px solid #ff8c00; }
    .modal-morado .modal-content { border-top: 16px solid #8a2be2; }
    .modal-celeste .modal-content { border-top: 16px solid #00bcd4; }
    .modal-celeste2 .modal-content { border-top: 16px solid #00bcd6; }
    
    /* üß© Fondo atenuado */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-in-out;
    }
  
    /* üì¶ Contenido de la ventana */
    .modal-content {
      background: #fff;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 90%;
      text-align: center;
      position: relative;
      animation: zoomIn 0.3s ease-in-out;
    }
    /* üåà Mejoras est√©ticas */
    .modal-content h2 {
      margin-top: 0;
      color: #2a6db3;
    }    
    .modal-content p {
      color: #333;
      line-height: 1.6;
    }  
  
    /* ‚ùå Bot√≥n cerrar */
    .close {
      position: absolute;
      top: 15px;
      right: 25px;
      font-size: 24px;
      cursor: pointer;
      color: #555;
      transition: transform 0.2s;
    }
    
    .close:hover {
      transform: scale(1.2);
      color: #000;
    }
    
    .buscador {
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .buscador input {
      padding: 0.4rem 0.6rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      font-family: inherit;
    }
    
    .buscador button {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: #087021; /* verde institucional */
      transition: transform 0.2s ease;
    }
    
    .buscador button:hover {
      transform: scale(1.2);
    }
    
  </style>
</head>
<body>
  <header>
    <img src="Imagenes/SAE_Junta_de_Andalucia_Documentacion.png" 
         alt="Logo Servicio Andaluz de Empleo. Junta de Andaluc√≠a" 
         class="logo-sae">
    <h1>Herramientas de Apoyo para Personal SAE</h1>
    <div class="buscador">
      <input type="text" placeholder="Buscar..." aria-label="Buscar">
      <button aria-label="Buscar">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#087021" viewBox="0 0 24 24">
          <path d="M10 2a8 8 0 105.293 14.293l5.707 5.707 1.414-1.414-5.707-5.707A8 8 0 0010 2zm0 2a6 6 0 110 12 6 6 0 010-12z"/>
        </svg>
      </button>
    </div>    
  </header>
  <main>
    <!-- üü¢ BLOQUE: PROCESO DE ORIENTACI√ìN -->
    <section id="orientacion" class="section">
      <div class="section-title">Proceso de Orientaci√≥n</div>
      <div class="diagram" id="diagram">
        <div class="box" id="inicio" data-modal="modal-inicio">EOI<br>Entrevista Inicial <br> de Orientaci√≥n</div>
        <div class="box" id="puntuales" data-modal="modal-puntuales">Servicios <br> Puntuales</div>
        <div class="box" id="profundidad" data-modal="modal-profundidad">Entrevista <br>en Profundidad</div>
        <div class="box" id="itinerario" data-modal="modal-itinerario">Dise√±o de <br> Itinerario</div>
        <div class="box" id="servicios" data-modal="modal-servicios">Desarrollo <br>de Servicios</div>
    
        <svg class="arrows">
          <defs>
            <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto" markerUnits="strokeWidth">
              <polygon points="0 0, 12 4, 0 8" fill="#333" />
            </marker>
          </defs>
        </svg>
      </div>
    </section>
    
    <!-- üü° MODALES -->
    <!-- üü© Modal EOI -->
    <div id="modal-inicio" class="modal modal-verde">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Entrevista Inicial de Orientaci√≥n</h2>
        <p>Pr√≥ximamente se incluir√° aqu√≠ el contenido detallado de esta fase.</p>
      </div>
    </div>
    
    <!-- üü® Modal Servicios Puntuales -->
    <div id="modal-puntuales" class="modal modal-amarillo">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Servicios Puntuales</h2>
        <p>Contenido en preparaci√≥n...</p>
      </div>
    </div>
    
    <!-- üü¶ Modal Entrevista en Profundidad -->
    <div id="modal-profundidad" class="modal modal-azul">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Entrevista en Profundidad</h2>
        <p>Contenido en preparaci√≥n...</p>
      </div>
    </div>
    
    <!-- üüß Modal Itinerario -->
    <div id="modal-itinerario" class="modal modal-naranja">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Dise√±o de Itinerario</h2>
        <p>Contenido en preparaci√≥n...</p>
      </div>
    </div>
    
    <!-- üü™ Modal Servicios -->
    <div id="modal-servicios" class="modal modal-morado">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Desarrollo de Servicios</h2>
        <p>Contenido en preparaci√≥n...</p>
      </div>
    </div>
  
    <!-- Bloque Migrantes -->
    <section id="migrantes" class="section">
      <div class="section-title">Gesti√≥n con Personas Migrantes</div>
      <!-- Contenedor en 2 columnas -->
      <div class="grid-imagenes">
        <div>
          <a href="https://view.genially.com/665d7760db0cdf0014210799" target="_blank">
            <img src="Imagenes/Guia_Empleo_Migrates.png" 
                 alt="Gu√≠a Interactiva de Empleo. Personas Migrantes en Andaluc√≠a" 
                 style="max-width: 100%; height: auto; cursor: pointer;">
          </a>
          <p>Gu√≠a Interactiva de Empleo.<br>Personas Migrantes en Andaluc√≠a.</p>
          <!-- Enlace para abrir QR -->
          <p>
            <a href="#" id="abrirQR" style="color: #2a6db3; text-decoration: underline; cursor: pointer;">
              üì± QR para personas usuarias
            </a>
          </p>  
        </div>
    
        <div>
          <a href="https://asistenciaorienta.github.io/SituacionesAdministrativas/" target="_blank">
            <img src="Imagenes/Ayuda_SILA_Migrantes.png" 
                 alt="Ayuda para el registro en SILA de una persona migrante" 
                 style="max-width: 100%; height: auto; cursor: pointer;">
          </a>
          <p>Ayuda para el <b>registro en SILA</b> de una persona migrante.</p>
        </div>
      </div>
    </section>
    
    <!-- üí† Modal QR -->
    <div id="modal-qr" class="modal modal-celeste">
      <div class="modal-content animarQR">
        <span class="close">&times;</span>
        <h2>QR para personas usuarias</h2>
        <img src="Imagenes/QR_guia_migrantes.png" 
             alt="C√≥digo QR Gu√≠a Migrantes" 
             style="max-width: 60%; height: auto; border-radius: 12px; margin-top: 10px;">
        <p style="margin-top: 10px;">Escanea este c√≥digo para acceder directamente a la Gu√≠a Interactiva de Empleo para personas migrantes.</p>
      </div>
    </div>
    
    <!-- üü¶ Bloque Empresas -->
    <section id="empresas" class="section">
      <div class="section-title">Gesti√≥n con Empresas</div>
      <div class="box" data-modal="modal-empresas-gpt" style="color: #333;">
        Consultorio sobre Contratos y Convenios
      </div>
    </section>
    
    <!-- üí† Modal Empresas-GPT -->
    <div id="modal-empresas-gpt" class="modal modal-celeste2">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Aviso de uso ‚Äî Servicio Andaluz de Empleo</h2>
        <p><b>Este es un GPT construido por el Servicio Andaluz de Empleo para uso de su personal.</b><br>
        Contin√∫a solo si perteneces al SAE o cuentas con autorizaci√≥n. El acceso puede dejar registro de auditor√≠a.</p>
        <br>
        <a href="https://chatgpt.com/g/g-68dcd5d94ab48191a6b5bdb9fd31c2f6-prueba-gpt-empresas" 
           target="_blank" 
           style="display: inline-block; background-color: #2a6db3; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold;">
           üöÄ Consultorio sobre Contratos y Convenios
        </a>
      </div>
    </div>
    
  </main>

  <footer>¬© 2025 - Servicio Andaluz de Empleo. Junta de Andaluc√≠a</footer>

  <script>
    function getBlockPosition(block) {
      return {
        left: block.offsetLeft,
        top: block.offsetTop,
        width: block.offsetWidth,
        height: block.offsetHeight,
        right: block.offsetLeft + block.offsetWidth,
        bottom: block.offsetTop + block.offsetHeight
      };
    }

    function drawArrow(svg, fromBlock, toBlock, fromCorner='center', toCorner='center', arrowHead=false) {
      const from = getBlockPosition(fromBlock);
      const to = getBlockPosition(toBlock);

      let x1, y1, x2, y2;

      // Coordenadas de inicio seg√∫n esquina
      switch(fromCorner) {
        case 'top-right': x1 = from.right; y1 = from.top; break;
        case 'bottom-right': x1 = from.right; y1 = from.bottom; break;
        case 'top-left': x1 = from.left; y1 = from.top; break;
        case 'bottom-left': x1 = from.left; y1 = from.bottom; break;
        default: x1 = from.right; y1 = from.top + from.height/2;
      }

      // Coordenadas de fin seg√∫n esquina
      switch(toCorner) {
        case 'top-left': x2 = to.left; y2 = to.top; break;
        case 'bottom-left': x2 = to.left; y2 = to.bottom; break;
        case 'top-right': x2 = to.right; y2 = to.top; break;
        case 'bottom-right': x2 = to.right; y2 = to.bottom; break;
        default: x2 = to.left; y2 = to.top + to.height/2;
      }

      // Control points para curva suave
      const cx1 = x1 + (x2-x1)/2;
      const cy1 = y1;
      const cx2 = x1 + (x2-x1)/2;
      const cy2 = y2;

      const path = document.createElementNS("http://www.w3.org/2000/svg","path");
      path.setAttribute("d", `M ${x1} ${y1} C ${cx1} ${cy1}, ${cx2} ${cy2}, ${x2} ${y2}`);
      path.setAttribute("stroke", "#333");
      path.setAttribute("stroke-width", "2");
      path.setAttribute("fill", "none");
      
      if (arrowHead) {
        path.setAttribute("marker-end", "url(#arrowhead)");
      }

      svg.appendChild(path);
    }

    function drawAllArrows() {
      const svg = document.querySelector("svg.arrows");
      const container = document.getElementById("diagram");

      // Limpiar flechas existentes
      svg.innerHTML = `<defs>
        <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto" markerUnits="strokeWidth">
          <polygon points="0 0, 12 4, 0 8" fill="#333" />
        </marker>
      </defs>`;

      svg.setAttribute("width", container.offsetWidth);
      svg.setAttribute("height", container.offsetHeight);
      svg.setAttribute("viewBox", `0 0 ${container.offsetWidth} ${container.offsetHeight}`);

      // Flechas verticales ‚Üí sin punta, horizontales ‚Üí con punta
      drawArrow(svg, document.getElementById("inicio"), document.getElementById("puntuales"), 'top-right', 'left', false);
      drawArrow(svg, document.getElementById("inicio"), document.getElementById("itinerario"), 'right', 'left', true);
      drawArrow(svg, document.getElementById("inicio"), document.getElementById("profundidad"), 'bottom-right', 'left', false);
      drawArrow(svg, document.getElementById("puntuales"), document.getElementById("itinerario"), 'right', 'top-left', false);
      drawArrow(svg, document.getElementById("profundidad"), document.getElementById("itinerario"), 'right', 'bottom-left', false);
      drawArrow(svg, document.getElementById("itinerario"), document.getElementById("servicios"), 'right', 'left', true);
    }

    window.addEventListener("load", drawAllArrows);
    window.addEventListener("resize", drawAllArrows);
  
    // --- MODALES GENERALES ---
      document.querySelectorAll('.box').forEach(box => {
        box.addEventListener('click', () => {
          const modalId = box.getAttribute('data-modal');
          const modal = document.getElementById(modalId);
          if (modal) modal.style.display = 'flex';
        });
      });
    
      document.querySelectorAll('.close').forEach(btn => {
        btn.addEventListener('click', () => {
          btn.closest('.modal').style.display = 'none';
        });
      });
    
      window.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
          e.target.style.display = 'none';
        }
      });
    
      // --- MODAL QR ---
      const modalQR = document.getElementById('modal-qr');
      const abrirQR = document.getElementById('abrirQR');
    
      abrirQR.addEventListener('click', (e) => {
        e.preventDefault();
        modalQR.style.display = 'flex';
      });  
  </script>
</body>
</html>
