<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Herramientas de apoyo para personal SAE en Oficinas de Empleo</title>
<style>

    /* ╔════════════════════════════════════════╗
       ║        CONFIGURACIÓN GLOBAL            ║
       ╚════════════════════════════════════════╝ */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    
    @font-face {
      font-family: 'Montserrat';
      src: url('fonts/Montserrat-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
    }
    
    @font-face {
      font-family: 'Montserrat';
      src: url('fonts/Montserrat-Bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
    }
    
    html, body {
      height: 100%;
      overflow: hidden;
    }
    
    body {
      font-family: "Montserrat", "Segoe UI", sans-serif;
      background: #ffffff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      width: 100%;
      line-height: 1.6;
    }
    
    /* ╔════════════════════════════════════════╗
       ║               CABECERA                 ║
       ╚════════════════════════════════════════╝ */
    header {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #fff;
      color: #087021;
      padding: 1rem 2rem;
    }
    
    header::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -16px;
      height: 14px;
      width: 100%;
      background: linear-gradient(to right, #e9d87c, #78a579);
    }
    
    header img.logo-sae {
      position: absolute;
      left: 1rem;
      max-height: 60px;
      height: auto;
      width: auto;
    }
    
    header h1 {
      font-size: 2rem;
      font-weight: 800;
      margin: 0;
      text-align: center;
    }
    
    header h2 {
      font-size: 1.2rem;
      font-weight: bold;
      margin: 0.3rem 0 0;
      color: #e3cd66;
    }
    
    /* ╔════════════════════════════════════════╗
       ║                 FOOTER                 ║
       ╚════════════════════════════════════════╝ */
    footer {
      background-color: #555;
      color: #fff;
      text-align: center;
      padding: 1rem;
      font-size: 1rem;
      width: 100%;
      position: fixed;
      bottom: 0;
      left: 0;
      z-index: 990;
    }
    
    footer .contacto-btn {
      margin-left: 1rem;
      background-color: #e9d87c;
      color: #333;
      border: none;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    
    footer .contacto-btn:hover {
      background-color: #d8c56a;
    }
    
    /* ╔════════════════════════════════════════╗
       ║          FORMULARIO CONTACTO           ║
       ╚════════════════════════════════════════╝ */
    #modal-contacto .modal-content form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    #modal-contacto fieldset {
      border: none;
      padding: 0;
    }
    
    #modal-contacto legend {
      font-weight: bold;
      color: #087021;
      margin-bottom: 0.5rem;
    }
    
    #modal-contacto textarea {
      width: 100%;
      padding: 0.6rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-family: inherit;
      resize: vertical;
    }
    
    #modal-contacto button[type="submit"] {
      background-color: #087021;
      color: white;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      align-self: center;
      transition: background 0.3s ease;
    }
    
    #modal-contacto button[type="submit"]:hover {
      background-color: #065c1a;
    }
    
    /* ╔════════════════════════════════════════╗
       ║               LAYOUT MAIN              ║
       ╚════════════════════════════════════════╝ */
    main {
      flex: 1;
      display: grid;
      grid-template-columns: 2fr 1fr;
      grid-template-rows: auto auto;
      gap: 1rem;
      padding: 1rem;
      overflow: auto;
      height: calc(100vh - 160px);
      margin-top: 1rem;
    }
    
    /* ╔════════════════════════════════════════╗
       ║                SECCIONES               ║
       ╚════════════════════════════════════════╝ */
    .section {
      background: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 2rem 1rem;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .section-title {
      font-size: clamp(1.3rem, 3vw, 1.8rem);
      font-weight: bold;
      color: #333;
      font-weight: 600;
      text-align: center;
      padding: 0.5rem 0;
      margin-bottom: 1.5rem;
      border-radius: 12px;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    /* Colores de cabecera por bloque */
    #orientacion .section-title { background: linear-gradient(135deg, #087021, #F5E784); }
    #migrantes .section-title { background: linear-gradient(135deg, #a5cca0, #D8F2D5); }
    #proceso-empresas .section-title { background: linear-gradient(135deg, #1c7bd6, #ACDDE8); }
    #otras_herramientas .section-title { background: linear-gradient(135deg, #d3d3d3, #f0f0f0); }
    
    /* ╔════════════════════════════════════════╗
       ║             DIAGRAMAS BASE             ║
       ╚════════════════════════════════════════╝ */
    .diagram {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
      box-sizing: border-box;
    }
    
    .box {
      flex: 1 1 180px; /* Se adapta al espacio disponible */
      max-width: 220px;
      min-width: 150px;
      aspect-ratio: 1 / 1; /* Mantiene forma cuadrada */
      background: #f4f4f4;
      border: 2px solid #ccc;
      border-radius: 20px;
      text-align: center;
      font-weight: bold;
      font-size: clamp(0.8rem, 2vw, 1rem);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      box-sizing: border-box;
      transition: transform 0.2s ease, background 0.3s ease;
      cursor: pointer;
    }
    
     .box:hover {
      transform: scale(1.05);
      background: #e8f5e9;
    }
    
    /* Colores de cajas */
    #inicio { background: #087021; grid-column: 1; grid-row: 2; }
    #puntuales { background: #e3cd66; color:#333; grid-column: 3; grid-row: 1; }
    #profundidad { background: #a5cca0; color:#333; grid-column: 3; grid-row: 3; }
    #objetivo { background: none; border: none; text-align: center; grid-column: 5; grid-row: 2; }
    #itinerario { background: #77b5c3; grid-column: 7; grid-row: 2; }
    #servicios { background: #087021; grid-column: 9; grid-row: 2; }
    
    /* Flechas SVG */
    svg.arrows {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 2;
    }
    path {
      stroke: #333;
      stroke-width: 2;
      fill: none;
    }
    .arrows {
      width: 100%;
      height: auto;
      max-width: 100%;
    }
    /* ╔════════════════════════════════════════╗
       ║             DIANA (OBJETIVO)           ║
       ╚════════════════════════════════════════╝ */
    .box.diana {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      border: 2px solid #009639;
      border-radius: 10px;
      width: 130px;
      height: 130px;
      cursor: pointer;
      overflow: hidden;
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }
    .box.diana .target {
      position: absolute;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }    
    .box.diana:hover {
      transform: scale(1.05);
    }
    
    .box.diana .label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      font-weight: bold;
      font-size: 0.95rem;
      color: #222;
      line-height: 1.1;
      z-index: 2;
      text-shadow: 0 0 3px white, 0 0 6px white;
      pointer-events: none;
    }
    .label {
      z-index: 2;
      text-shadow: 0 0 6px white;
      font-weight: bold;
      text-align: center;
      font-size: clamp(0.9rem, 2vw, 1.1rem);
    }
    .target {
      position: relative;
      width: 100%;
      height: 100%;
      animation: pulse 2.5s ease-in-out infinite;
    }
    
    .circle {
      position: absolute;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .circle.outer {
      width: 100%;
      height: 100%;
      background: rgba(0, 150, 57, 0.15);
      border: 2px solid #009639;
    }
    
    .circle.inner {
      width: 25%;
      height: 25%;
      background: #009639;
    }
    .box.diana .circle {
      border-radius: 50%;
      position: absolute;
      border: 2px solid #087021;
    }
    
    .box.diana .circle.outer {
      width: 85%;
      height: 85%;
      opacity: 0.3;
    }
    
    .box.diana .circle.center {
      width: 20%;
      height: 20%;
      background: #087021;
    }
    /* ╔════════════════════════════════════════╗
       ║              ANIMACIONES               ║
       ╚════════════════════════════════════════╝ */
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.95; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes zoomIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* ╔════════════════════════════════════════╗
       ║                ENLACES                 ║
       ╚════════════════════════════════════════╝ */
    a {
      color: #3b82f6;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    a:hover {
      color: #1e40af;
      text-shadow: 0 0 6px rgba(59,130,246,0.3);
    }
    
    /* ╔════════════════════════════════════════╗
       ║                 MODALES                ║
       ╚════════════════════════════════════════╝ */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-in-out;
    }
    
    .modal-content {
      background: #fff;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 90%;
      text-align: center;
      position: relative;
      animation: zoomIn 0.3s ease-in-out;
    }
    
    .modal-content h2 { color: #2a6db3; margin-top: 0; }
    .modal-content p { color: #333; line-height: 1.6; }
    
    .close {
      position: absolute;
      top: 15px;
      right: 25px;
      font-size: 24px;
      cursor: pointer;
      color: #555;
      transition: transform 0.2s;
    }
    .close:hover { transform: scale(1.2); color: #000; }
    
    /* Colores modales */
    .modal-verde .modal-content { border-top: 16px solid #2e8b57; }
    .modal-amarillo .modal-content { border-top: 16px solid #e8b300; }
    .modal-azul .modal-content { border-top: 16px solid #1e90ff; }
    .modal-naranja .modal-content { border-top: 16px solid #ff8c00; }
    .modal-morado .modal-content { border-top: 16px solid #8a2be2; }
    .modal-celeste .modal-content { border-top: 16px solid #00bcd4; }
    .modal-gris .modal-content { border-top: 16px solid #333; }

    /* ╔════════════════════════════════════════╗
       ║       Ajustes para móviles             ║
       ╚════════════════════════════════════════╝ */

    @media (max-width: 768px) {
      .diagram {
        gap: 1rem;
      }
    
      .box {
        flex: 1 1 45%;
        font-size: 0.9rem;
      }
    }
    
    @media (max-width: 480px) {
      .box {
        flex: 1 1 100%;
        max-width: none;
        aspect-ratio: auto;
        height: auto;
        padding: 1.2rem;
      }
    }
</style>

</head>
<body>
  <header>
    <img src="Imagenes/SAE_Junta_de_Andalucia_Documentacion.png" 
         alt="Logo Servicio Andaluz de Empleo. Junta de Andalucía" 
         class="logo-sae">
    <h1>Herramientas de Apoyo para Personal SAE</h1>
    <div class="buscador">
      <input type="text" placeholder="Buscar..." aria-label="Buscar">
      <button aria-label="Buscar">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#087021" viewBox="0 0 24 24">
          <path d="M10 2a8 8 0 105.293 14.293l5.707 5.707 1.414-1.414-5.707-5.707A8 8 0 0010 2zm0 2a6 6 0 110 12 6 6 0 010-12z"/>
        </svg>
      </button>
    </div>    
  </header>
  <main>
    <!-- 🟢 BLOQUE: PROCESO DE ORIENTACIÓN -------------------------------------------------------------------------------------->
    <section id="orientacion" class="section">
      <div class="section-title">Proceso de Orientación</div>
      <div class="diagram" id="diagram">
        <div class="box" id="inicio" data-modal="modal-inicio">EOI<br>Entrevista Inicial <br> de Orientación</div>
        <div class="box" id="puntuales" data-modal="modal-puntuales">Servicios <br> Puntuales</div>
        <div class="box" id="profundidad" data-modal="modal-profundidad">Entrevista <br>en Profundidad</div>

        <div class="box diana" id="objetivo" data-modal="modal-objetivo">
          <div class="label">Objetivo <br>Profesional</div>
          <div class="target">
            <div class="circle outer"></div>
            <div class="circle white"></div>
            <div class="circle inner"></div>
            <div class="circle center"></div>
          </div>
        </div>

        <!--<div class="box" id="objetivo" data-modal="modal-objetivo">Objetivo <br>Profesional</div>-->     
        <div class="box" id="itinerario" data-modal="modal-itinerario">Diseño de <br> Itinerario</div>
        <div class="box" id="servicios" data-modal="modal-servicios">Desarrollo <br>de Servicios</div>
    
        <svg class="arrows">
          <defs>
            <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto" markerUnits="strokeWidth">
              <polygon points="0 0, 12 4, 0 8" fill="#333" />
            </marker>
          </defs>
        </svg>
      </div>
    </section>
    
    <!-- 🟡 MODALES -->
<!-- 🟩 Modal EOI -->
<div id="modal-inicio" class="modal modal-verde">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Entrevista Inicial de Orientación</h2>

    <p style="text-align: left; margin-bottom: 1.5rem;">
      La Entrevista Inicial de Orientación es el primer contacto con la persona usuaria.
      Permite conocer su situación, necesidades y expectativas para definir la mejor estrategia de atención.
    </p>

    <div style="text-align: left; margin-bottom: 1.5rem;">
      <h3 style="color:#087021; margin-bottom:0.5rem;">📄 Documentación:</h3>
      <ul style="margin: 0; padding-left: 1.2rem;">
        <li><a href="docs/Guia_Entrevista_Inicial.pdf" target="_blank">Guía de la Entrevista Inicial</a></li>
        <li><a href="docs/Plantilla_Registro_Entrevista.docx" target="_blank">Plantilla de registro de entrevista</a></li>
      </ul>
    </div>

    <div style="text-align: left;">
      <h3 style="color:#087021; margin-bottom:0.5rem;">🛠️ Herramientas:</h3>
      <ul style="margin: 0; padding-left: 1.2rem;">
        <li><a href="herramientas/Cuestionario_Diagnostico.html" target="_blank">Cuestionario diagnóstico</a></li>
        <li><a href="herramientas/Guia_Preguntas_Clave.pdf" target="_blank">Guía de preguntas clave</a></li>
      </ul>
    </div>
  </div>
</div>
    
    <!-- 🟨 Modal Servicios Puntuales -->
    <div id="modal-puntuales" class="modal modal-amarillo">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Servicios Puntuales</h2>
        <p>Contenido en preparación...</p>
      </div>
    </div>
    
    <!-- 🟦 Modal Entrevista en Profundidad -->
    <div id="modal-profundidad" class="modal modal-azul">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Entrevista en Profundidad</h2>
        <p>Contenido en preparación...</p>
      </div>
    </div>
    
    <!-- 🟧 Modal Itinerario -->
    <div id="modal-itinerario" class="modal modal-naranja">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Diseño de Itinerario</h2>
        <p>Contenido en preparación...</p>
      </div>
    </div>
    
    <!-- 🟪 Modal Servicios -->
    <div id="modal-servicios" class="modal modal-morado">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Desarrollo de Servicios</h2>
        <p>Contenido en preparación...</p>
      </div>
    </div>
  
    <!-- Bloque Migrantes -->
    <section id="migrantes" class="section">
      <div class="section-title">Gestión con Personas Migrantes</div>
      <!-- Contenedor en 2 columnas -->
      <div class="grid-imagenes">
        <div>
          <a href="https://view.genially.com/665d7760db0cdf0014210799" target="_blank">
            <img src="Imagenes/Guia_Empleo_Migrates.png" 
                 alt="Guía Interactiva de Empleo. Personas Migrantes en Andalucía" 
                 style="max-width: 100%; height: auto; cursor: pointer;">
          </a>
          <p style="font-size: 0.85em;"><b>Guía Interactiva</b> de Empleo.<br>Personas Migrantes en Andalucía.</p>
          <!-- Enlace para abrir QR -->
          <p style="font-size: 0.85em;">
            <a href="#" id="abrirQR" style="color: #2a6db3; text-decoration: underline; cursor: pointer;">
              📱 QR para personas usuarias
            </a>
          </p>
        </div>
    
        <div>
          <a href="https://asistenciaorienta.github.io/SituacionesAdministrativas/" target="_blank">
            <img src="Imagenes/Ayuda_SILA_Migrantes2.png" 
                 alt="Registro en SILA de una persona extranjera" 
                 style="max-width: 80%; height: auto; cursor: pointer;">
          </a>
          <p style="font-size: 0.85em;"><b>Registro en SILA</b><br>de personas extranjeras</p>
        </div>
      </div>
    </section>
    
    <!-- 💠 Modal QR -->
    <div id="modal-qr" class="modal modal-celeste">
      <div class="modal-content animarQR">
        <span class="close">&times;</span>
        <h2>QR para personas usuarias</h2>
        <img src="Imagenes/QR_guia_migrantes.png" 
             alt="Código QR Guía Migrantes" 
             style="max-width: 60%; height: auto; border-radius: 12px; margin-top: 10px;">
        <p style="margin-top: 10px;">Escanea este código para acceder directamente a la Guía Interactiva de Empleo para personas migrantes.</p>
      </div>
    </div>
   
    <!-- 🟦 BLOQUE: EMPRESAS ------------------------------------------------------------------------------------>
    <section id="proceso-empresas" class="section">    
      <div class="section-title">Proceso con Empresas</div>
      <div class="diagram" id="diagram-empresas">
        <div class="box" id="contacto" data-modal="modal-contacto">Contacto /<br>Prospección</div>
        <div class="box" id="informacion" data-modal="modal-informacion">Información y/o<br>Asesoramiento</div>
        <div class="box" id="ofertas" data-modal="modal-ofertas">Gestión de<br>Ofertas</div>
        <div class="box" id="seguimiento" data-modal="modal-seguimiento">Seguimiento y<br>Fidelización</div>
        <svg class="arrows">
          <defs>
            <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto" markerUnits="strokeWidth">
              <polygon points="0 0, 12 4, 0 8" fill="#333" />
            </marker>
          </defs>
        </svg>        
      </div>
    </section>

    <!-- Bloque Otras Herramientas -->
    <section id="otras_herramientas" class="section">
      <div class="section-title">Otras Herramientas Útiles</div>
      <!-- Contenedor en 2 columnas -->
      <div class="grid-imagenes">
          <!-- Aquí puedes añadir contenido -->
      </div>
    </section>  
    
    <!-- Modal Contacto / Prospección -->
    <div id="modal-contacto" class="modal modal-verde">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Contacto / Prospección</h2>
        <p>Primer acercamiento a la empresa para identificar necesidades y establecer una relación inicial.</p>
      </div>
    </div>
    
    <!-- Modal Información / Asesoramiento -->
    <div id="modal-informacion" class="modal modal-azul">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Información y/o Asesoramiento</h2>
        <p>Se proporciona información sobre servicios, programas y recursos disponibles para la empresa.</p>
      </div>
    </div>
    
    <!-- Modal Gestión de Ofertas -->
    <div id="modal-ofertas" class="modal modal-naranja">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Gestión de Ofertas</h2>
        <p>Se formalizan las ofertas de empleo y se inicia el proceso de intermediación laboral.</p>
      </div>
    </div>
    
    <!-- Modal Seguimiento y Fidelización -->
    <div id="modal-seguimiento" class="modal modal-morado">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Seguimiento y Fidelización</h2>
        <p>Se mantiene el contacto con la empresa para evaluar resultados y fomentar futuras colaboraciones.</p>
      </div>
    </div>    
  </main>

  <footer style="position: relative; text-align: center; padding: 10px;">
    © 2025 - Servicio Andaluz de Empleo. Junta de Andalucía
    <button class="contacto-btn" onclick="document.getElementById('modal-contacto').style.display='flex'">Contacto</button>
    <img src="Imagenes/vje2.png" 
         style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); width: 25px;">
  </footer>


  <div id="modal-contacto" class="modal modal-gris">
    <div class="modal-content">
      <span class="close" onclick="document.getElementById('modal-contacto').style.display='none'">&times;</span>
      <h2>Contacto</h2>
      <form id="formulario-contacto" onsubmit="enviarCorreo(); return false;">
        <fieldset>
          <legend>Sugerencias de nuevas herramientas</legend>
          <textarea id="sugerencia" placeholder="Describe tu propuesta..." rows="4"></textarea>
        </fieldset>
        <fieldset>
          <legend>Consultas o dudas</legend>
          <textarea id="consulta" placeholder="Escribe tu pregunta..." rows="4"></textarea>
        </fieldset>
        <button type="submit">Enviar</button>
      </form>
    </div>
  </div>

  <script>
    function enviarCorreo() {
      const sugerencia = document.getElementById('sugerencia').value.trim();
      const consulta = document.getElementById('consulta').value.trim();
    
      let cuerpo = "";
    
      if (sugerencia) {
        cuerpo += "🛠️ Sugerencia:\n" + sugerencia + "\n\n";
      }
    
      if (consulta) {
        cuerpo += "❓ Consulta:\n" + consulta + "\n\n";
      }
    
      if (!cuerpo) {
        alert("Por favor, escribe una sugerencia o una consulta antes de enviar.");
        return;
      }
    
      const destinatario = "asistenciaorienta.gr.sae@juntadeandalucia.es";
      const asunto = "Herramientas de Apoyo para Personal SAE: Sugerencia / Consulta";
    
      const mailtoLink = `mailto:${destinatario}?subject=${encodeURIComponent(asunto)}&body=${encodeURIComponent(cuerpo)}`;
      window.location.href = mailtoLink;
    }
    
    function getBlockPosition(block) {
      return {
        left: block.offsetLeft,
        top: block.offsetTop,
        width: block.offsetWidth,
        height: block.offsetHeight,
        right: block.offsetLeft + block.offsetWidth,
        bottom: block.offsetTop + block.offsetHeight
      };
    }

    function drawArrow(svg, fromBlock, toBlock, fromCorner='center', toCorner='center', arrowHead=false) {
      const from = getBlockPosition(fromBlock);
      const to = getBlockPosition(toBlock);

      let x1, y1, x2, y2;

      // Coordenadas de inicio según esquina
      switch(fromCorner) {
        case 'top-right': x1 = from.right; y1 = from.top; break;
        case 'bottom-right': x1 = from.right; y1 = from.bottom; break;
        case 'top-left': x1 = from.left; y1 = from.top; break;
        case 'bottom-left': x1 = from.left; y1 = from.bottom; break;
        default: x1 = from.right; y1 = from.top + from.height/2;
      }

      // Coordenadas de fin según esquina
      switch(toCorner) {
        case 'top-left': x2 = to.left; y2 = to.top; break;
        case 'bottom-left': x2 = to.left; y2 = to.bottom; break;
        case 'top-right': x2 = to.right; y2 = to.top; break;
        case 'bottom-right': x2 = to.right; y2 = to.bottom; break;
        default: x2 = to.left; y2 = to.top + to.height/2;
      }

      // Control points para curva suave
      const cx1 = x1 + (x2-x1)/2;
      const cy1 = y1;
      const cx2 = x1 + (x2-x1)/2;
      const cy2 = y2;

      const path = document.createElementNS("http://www.w3.org/2000/svg","path");
      path.setAttribute("d", `M ${x1} ${y1} C ${cx1} ${cy1}, ${cx2} ${cy2}, ${x2} ${y2}`);
      path.setAttribute("stroke", "#333");
      path.setAttribute("stroke-width", "2");
      path.setAttribute("fill", "none");
      
      if (arrowHead) {
        path.setAttribute("marker-end", "url(#arrowhead)");
      }

      svg.appendChild(path);
    }

    function drawArrowsOrientacion() {
      const svg = document.querySelector("#diagram svg.arrows");
      const container = document.getElementById("diagram");
    
      svg.innerHTML = `<defs>
        <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto" markerUnits="strokeWidth">
          <polygon points="0 0, 12 4, 0 8" fill="#333" />
        </marker>
      </defs>`;
      svg.setAttribute("width", container.offsetWidth);
      svg.setAttribute("height", container.offsetHeight);
      svg.setAttribute("viewBox", `0 0 ${container.offsetWidth} ${container.offsetHeight}`);
    // Flechas verticales → sin punta, horizontales → con punta
      drawArrow(svg, document.getElementById("inicio"), document.getElementById("puntuales"), 'top-right', 'left', false);
      drawArrow(svg, document.getElementById("inicio"), document.getElementById("objetivo"), 'right', 'left', true);
      drawArrow(svg, document.getElementById("inicio"), document.getElementById("profundidad"), 'bottom-right', 'left', false);
      drawArrow(svg, document.getElementById("puntuales"), document.getElementById("objetivo"), 'right', 'top-left', false);
      drawArrow(svg, document.getElementById("profundidad"), document.getElementById("objetivo"), 'right', 'bottom-left', false);
      drawArrow(svg, document.getElementById("objetivo"), document.getElementById("itinerario"), 'right', 'left', true);
      drawArrow(svg, document.getElementById("itinerario"), document.getElementById("servicios"), 'right', 'left', true);
    }
    
    function drawArrowsEmpresas() {
      const svg = document.querySelector("#diagram-empresas svg.arrows");
      const container = document.getElementById("diagram-empresas");
    
      svg.innerHTML = `<defs>
        <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto" markerUnits="strokeWidth">
          <polygon points="0 0, 12 4, 0 8" fill="#333" />
        </marker>
      </defs>`;
      svg.setAttribute("width", container.offsetWidth);
      svg.setAttribute("height", container.offsetHeight);
      svg.setAttribute("viewBox", `0 0 ${container.offsetWidth} ${container.offsetHeight}`);
    // Flechas verticales → sin punta, horizontales → con punta
      drawArrow(svg, document.getElementById("contacto"), document.getElementById("informacion"), 'top-right', 'left', false);
      drawArrow(svg, document.getElementById("contacto"), document.getElementById("ofertas"), 'bottom-right', 'left', false);
      drawArrow(svg, document.getElementById("informacion"), document.getElementById("seguimiento"), 'right', 'top-left', false);
      drawArrow(svg, document.getElementById("ofertas"), document.getElementById("seguimiento"), 'right', 'bottom-left', false);
    }
    
    function drawAllArrows() {
      drawArrowsOrientacion();
      drawArrowsEmpresas();
    }
    
    window.addEventListener("load", drawAllArrows);
    window.addEventListener("resize", drawAllArrows);

  
    // --- MODALES GENERALES ---
      document.querySelectorAll('.box').forEach(box => {
        box.addEventListener('click', () => {
          const modalId = box.getAttribute('data-modal');
          const modal = document.getElementById(modalId);
          if (modal) modal.style.display = 'flex';
        });
      });
    
      document.querySelectorAll('.close').forEach(btn => {
        btn.addEventListener('click', () => {
          btn.closest('.modal').style.display = 'none';
        });
      });
    
      window.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
          e.target.style.display = 'none';
        }
      });
    
      // --- MODAL QR ---
      const modalQR = document.getElementById('modal-qr');
      const abrirQR = document.getElementById('abrirQR');
    
      abrirQR.addEventListener('click', (e) => {
        e.preventDefault();
        modalQR.style.display = 'flex';
      });  


  </script>
</body>
</html>
